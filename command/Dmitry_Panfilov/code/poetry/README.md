## Использование Poetry

**poetry** - продвинутый менеджер зависимостей Python-проектов

1. Установка poetry: `curl -sSL https://raw.githubusercontent.com/python-poetry/poetry/master/get-poetry.py | python`
или `pip install poetry`
2. Инициализация проекта с помощью poetry: `poetry init`
3. Добавление зависимостей в проект: `poetry add fastapi pydantic requests tensorflow`
4. Первичная установка: `poetry install`
5. Обновление: `poetry update`
6. Активация виртуального окружения: `poetry shell`
7. Запуск сервера: `poetry run uvicorn main:app --host 0.0.0.0 --port 8000 --reload`
8. Структура зависимостей: `poetry show --tree`

---

## Использование CUDA (cuDNN) c Tensorflow

Для установки всех зависимостей и драйвера на **Manjaro Linux** для поддержки **CUDA 12.0 и cuDNN** необходимо выполнить следующие шаги:
1.  Установить драйвер NVIDIA, совместимый с CUDA 12.0: `sudo mhwd -a pci nonfree 0300`
2.  Установить **CUDA Toolkit 12.0**. Для этого необходимо скачать установочный файл с официального сайта NVIDIA и запустить его с правами администратора.
3.  Установить библиотеку **cuDNN** версии, совместимой с CUDA 12.0. Для этого нужно зарегистрироваться на официальном сайте NVIDIA и скачать архив с нужной версией cuDNN.
4.  Выполнить команды:
- `sudo cp cuda/lib64/libcudnn* /usr/local/cuda-12.0/lib64/`
- `sudo cp cuda/include/cudnn.h /usr/local/cuda-12.0/include/`
5. Установить зависимости для проекта с помощью Poetry, указав требуемые версии библиотек:
- `poetry install`

---

## Инструменты документации для API
**FastAPI** предоставляет интерактивную документацию, которая позволяет **тестировать API прямо из браузера**, что упрощает отладку и тестирование приложения, где можно быстро ознакомиться с доступными методами и параметрами запросов.

Функции http://localhost:8000/docs и http://localhost:8000/redoc относятся к инструментам документации для API, предоставляемым FastAPI.

- **[docs] http://localhost:8000/docs** отображает интерактивную документацию Swagger UI, которая позволяет пользователям исследовать и тестировать API напрямую через веб-интерфейс. Swagger UI генерирует документацию на основе спецификации OpenAPI, которая автоматически создается FastAPI.

- **[redoc] http://localhost:8000/redoc**, с другой стороны, отображает интерактивную документацию ReDoc, которая также генерируется на основе спецификации OpenAPI. ReDoc имеет более простой и легкий интерфейс, чем Swagger UI, но предоставляет ту же информацию о том, как использовать API.

![image](https://user-images.githubusercontent.com/99917230/227996622-926cf5c1-583f-46d5-a0f9-757e825b5062.png)

---

## Список команд:

- shell - при первом запуске этой команды в каталоге вашего проекта Poetry создает виртуальную среду Python, которая будет связана с проектом. Вместо создания папки, содержащей библиотеки зависимостей, Poetry создает среду на глобальном системном пути. Как только эта виртуальная среда будет создана, ее можно активировать в любое время, запустив `poetry shell` в каталоге проекта.
- install - устанавливает зависимости, указанные в 
pyproject.toml
. При первой установке создается файл 
.lock
, который содержит фактические номера версий каждого установленного пакета. Номера версий в 
.lock
 приоритетнее, чем находящиеся в 
pyproject.toml
.
update
 — если для пакетов в 
pyproject.toml
 существуют более новые версии, они будут установлены, и 
.lock
 файл будет обновлен.
add
 — добавление зависимости к 
pyproject.toml
. Пакет устанавливается сразу после применения команды.
remove
 — удаление библиотеки зависимостей.
config
 — пути к текущей виртуальной среде или ее переменные. Передача опции 
--list
 вернет текущие значения конфигурации.
check
 — проверяет 
pyproject.toml
 на наличие ошибок.
show
 — возвращает вывод всех пакетов, установленных в проекте, включая зависимости зависимостей.
run
 — выполняет сценарий, заданный в разделе 
tool.poetry.scripts
 в 
pyproject.toml
.
build
 — собирает исходники и пакеты в архив.
publish
 — публикует вывод предыдущей сборки во внешнем репозитории, например, в PyPi.
